!function(t){var n={};function e(i){if(n[i])return n[i].exports;var s=n[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,e),s.l=!0,s.exports}e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var s in t)e.d(i,s,function(n){return t[n]}.bind(null,s));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){"use strict";e.r(n);e(1),e(2)},function(t,n){var e={countTicks:360,frequencyData:[],tickSize:10,PI:360,index:0,loadingAngle:0,init:function(t){this.canvas=document.querySelector("canvas"),this.scene=t,this.context=t.context,this.configure()},configure:function(){this.maxTickSize=9*this.tickSize*this.scene.scaleCoef,this.countTicks=360*s.scaleCoef},draw:function(){this.drawTicks(),this.drawEdging()},drawTicks:function(){this.context.save(),this.context.beginPath(),this.context.lineWidth=1,this.ticks=this.getTicks(this.countTicks,this.tickSize,[0,90]);for(var t=0,n=this.ticks.length;t<n;++t){var e=this.ticks[t];this.drawTick(e.x1,e.y1,e.x2,e.y2)}this.context.restore()},drawTick:function(t,n,e,i){var s=parseInt(this.scene.cx+t),o=parseInt(this.scene.cy+n),a=parseInt(this.scene.cx+e),r=parseInt(this.scene.cy+i),c=this.context.createLinearGradient(s,o,a,r);c.addColorStop(0,"#8E3830"),c.addColorStop(.6,"#8E3830"),c.addColorStop(1,"#8E3830"),this.context.beginPath(),this.context.strokeStyle=c,this.context.lineWidth=2,this.context.moveTo(this.scene.cx+t,this.scene.cx+n),this.context.lineTo(this.scene.cx+e,this.scene.cx+i),this.context.stroke()},setLoadingPercent:function(t){this.loadingAngle=2*t*Math.PI},drawEdging:function(){this.context.save(),this.context.beginPath(),this.context.strokeStyle="rgba(142, 56, 48, 1)",this.context.lineWidth=1;var t=i.lineWidth/2;this.context.moveTo(this.scene.padding+2*this.scene.radius-i.innerDelta-t,this.scene.padding+this.scene.radius),this.context.arc(this.scene.cx,this.scene.cy,this.scene.radius-i.innerDelta-t,0,this.loadingAngle,!1),this.context.stroke(),this.context.restore()},getTicks:function(t,n,e){for(var i,s,o,a,r,c,h=this.getTickPoitns(t),u=[],d=[],l=0,g=h.length;l<g;++l){var f=1-l/(2.5*g),p=((this.frequencyData[l]||0)-160*f)*this.scene.scaleCoef;if(p<0&&(p=0),r=h[l],c=e[0]<=r.angle&&r.angle<=e[1]?this.scene.radius/(this.scene.radius-this.getSize(r.angle,e[0],e[1])-p):this.scene.radius/(this.scene.radius-(10+p)),o=(i=r.x*(this.scene.radius-10))*c,a=(s=r.y*(this.scene.radius-10))*c,u.push({x1:i,y1:s,x2:o,y2:a}),l<20){var x=p/50;x=x<1?1:x,d.push(x)}}var m=d.reduce(function(t,n){return t+n},0)/d.length;return this.canvas.style.transform="scale("+m+")",u},getSize:function(t,n,e){var i,s=(e-n)/2,o=t-n;if(o==s)return this.maxTickSize;var a=Math.abs(s-o),r=70*Math.sqrt(1/a);return i=r>this.maxTickSize?this.maxTickSize-a:Math.max(this.tickSize,r),this.index>this.count&&(this.index=0),i},getTickPoitns:function(t){for(var n=[],e=this.PI/t,i=0;i<this.PI;i+=e){var s=i*Math.PI/(this.PI/2);n.push({x:Math.cos(s),y:-Math.sin(s),angle:i})}return n}},i={innerDelta:20,lineWidth:7,prevAngle:.5,angle:0,animationCount:10,pressButton:!1,init:function(t){this.scene=t,this.context=t.context,this.initHandlers()},initHandlers:function(){var t=this;this.scene.canvas.addEventListener("mousedown",function(n){t.isInsideOfSmallCircle(n)||t.isOusideOfBigCircle(n)||(t.prevAngle=t.angle,t.pressButton=!0,t.stopAnimation(),t.calculateAngle(n,!0))}),window.addEventListener("mouseup",function(){if(t.pressButton)var n=setInterval(function(){t.animatedInProgress||(t.pressButton=!1,a.context.currentTime=t.angle/(2*Math.PI)*a.source.buffer.duration,clearInterval(n))},100)}),window.addEventListener("mousemove",function(n){t.animatedInProgress||t.pressButton&&t.scene.inProcess()&&t.calculateAngle(n)})},isInsideOfSmallCircle:function(t){var n=Math.abs(t.pageX-this.scene.cx-this.scene.coord.left),e=Math.abs(t.pageY-this.scene.cy-this.scene.coord.top);return Math.sqrt(n*n+e*e)<this.scene.radius-3*this.innerDelta},isOusideOfBigCircle:function(t){return Math.abs(t.pageX-this.scene.cx-this.scene.coord.left)>this.scene.radius||Math.abs(t.pageY-this.scene.cy-this.scene.coord.top)>this.scene.radius},draw:function(){a.source.buffer&&(this.pressButton||(this.angle=a.context.currentTime/a.source.buffer.duration*2*Math.PI||0),this.drawArc())},drawArc:function(){this.context.save(),this.context.strokeStyle="rgba(142, 56, 48, 1)",this.context.beginPath(),this.context.lineWidth=this.lineWidth,this.r=this.scene.radius-(this.innerDelta+this.lineWidth/2),this.context.arc(this.scene.radius+this.scene.padding,this.scene.radius+this.scene.padding,this.r,0,this.angle,!1),this.context.stroke(),this.context.restore()},calculateAngle:function(t,n){this.animatedInProgress=n,this.mx=t.pageX,this.my=t.pageY,this.angle=Math.atan((this.my-this.scene.cy-this.scene.coord.top)/(this.mx-this.scene.cx-this.scene.coord.left)),this.mx<this.scene.cx+this.scene.coord.left&&(this.angle=Math.PI+this.angle),this.angle<0&&(this.angle+=2*Math.PI),n?this.startAnimation():this.prevAngle=this.angle},startAnimation:function(){var t=this,n=this.angle,e=(Math.abs(this.angle)-Math.abs(this.prevAngle))/this.animationCount,i=0,s=function(){t.angle+=e,++i==t.animationCount?(t.angle=n,t.prevAngle=n,t.animatedInProgress=!1):t.animateId=setTimeout(s,20)};this.angle=this.prevAngle,this.animateId=setTimeout(s,20)},stopAnimation:function(){clearTimeout(this.animateId),this.animatedInProgress=!1}},s={padding:120,minSize:740,optimiseHeight:982,_inProcess:!1,init:function(){this.canvasConfigure(),this.initHandlers(),e.init(this),i.init(this),o.init(this),this.startRender()},canvasConfigure:function(){this.canvas=document.querySelector("canvas"),this.context=this.canvas.getContext("2d"),this.context.strokeStyle="#8E3830",this.calculateSize()},calculateSize:function(){this.scaleCoef=Math.max(.5,740/this.optimiseHeight);var t=Math.max(this.minSize,1);this.canvas.setAttribute("width",t),this.canvas.setAttribute("height",t),this.width=t,this.height=t,this.radius=(t-2*this.padding)/2,this.cx=this.radius+this.padding,this.cy=this.radius+this.padding,this.coord=this.canvas.getBoundingClientRect()},initHandlers:function(){var t=this;window.onresize=function(){t.canvasConfigure(),e.configure(),t.render()}},render:function(){var t=this;requestAnimationFrame(function(){t.clear(),t.draw(),t._inProcess&&t.render()})},clear:function(){this.context.clearRect(0,0,this.width,this.height)},draw:function(){e.draw(),i.draw(),o.draw()},startRender:function(){this._inProcess=!0,this.render()},stopRender:function(){this._inProcess=!1},inProcess:function(){return this._inProcess}},o={playing:!1,init:function(t){this.scene=t,this.context=t.context,this.initHandlers(),this.timeControl=document.querySelector(".time")},initHandlers:function(){this.initPlayButton(),this.initPauseButton(),this.initSoundButton(),this.initPrevSongButton(),this.initNextSongButton(),this.initTimeHandler()},initPlayButton:function(){var t=this;this.playButton=document.querySelector(".play"),this.playButton.addEventListener("mouseup",function(){t.playButton.style.display="none",t.pauseButton.style.display="inline-block",a.play(),t.playing=!0})},initPauseButton:function(){var t=this;this.pauseButton=document.querySelector(".pause"),this.pauseButton.addEventListener("mouseup",function(){t.playButton.style.display="inline-block",t.pauseButton.style.display="none",a.pause(),t.playing=!1})},initSoundButton:function(){var t=this;this.soundButton=document.querySelector(".soundControl"),this.soundButton.addEventListener("mouseup",function(){t.soundButton.classList.contains("disable")?(t.soundButton.classList.remove("disable"),a.unmute()):(t.soundButton.classList.add("disable"),a.mute())})},initPrevSongButton:function(){var t=this;this.prevSongButton=document.querySelector(".prevSong"),this.prevSongButton.addEventListener("mouseup",function(){a.prevTrack(),t.playing&&a.play()})},initNextSongButton:function(){var t=this;$(".nextSong").on("click",function(){console.log("next"),a.nextTrack(),t.playing&&a.play()})},initTimeHandler:function(){var t=this;setTimeout(function(){var n=parseInt(a.context.currentTime||0),e=parseInt(n/60),i=n-60*e;e<10&&(e="0"+e),i<10&&(i="0"+i);var s=e+":"+i;t.timeControl.textContent=s,t.initTimeHandler()},300)},draw:function(){this.drawPic()},drawPic:function(){this.context.save(),this.context.beginPath(),this.context.fillStyle="rgba(142, 56, 48, 1)",this.context.lineWidth=1;var t=i.r/Math.sqrt(Math.pow(Math.tan(i.angle),2)+1),n=Math.sqrt(i.r*i.r-t*t);2==this.getQuadrant()&&(t=-t),3==this.getQuadrant()&&(t=-t,n=-n),4==this.getQuadrant()&&(n=-n),this.context.arc(this.scene.radius+this.scene.padding+t,this.scene.radius+this.scene.padding+n,10,0,2*Math.PI,!1),this.context.fill(),this.context.restore()},getQuadrant:function(){return 0<=i.angle&&i.angle<Math.PI/2?1:Math.PI/2<=i.angle&&i.angle<Math.PI?2:Math.PI<i.angle&&i.angle<3*Math.PI/2?3:3*Math.PI/2<=i.angle&&i.angle<=2*Math.PI?4:void 0}},a={buffer:null,duration:0,tracks:[{artist:"Awolnation",song:"Sail",url:"https://uplusion23.github.io/cdn/music/awolnation/sail.mp3"},{artist:"Bastille",song:"Pompeii",url:"https://uplusion23.github.io/cdn/music/bastille/pompeii.mp3"},{artist:"Deadmau5",song:"Ghosts n' Stuff",url:"https://uplusion23.github.io/cdn/music/deadmau5/ghosts_n_stuff.mp3"},{artist:"Foster The People",song:"Pumped Up Kicks",url:"https://uplusion23.github.io/cdn/music/foster_the_people/pumped_up_kicks.mp3"},{artist:"Ghost Town",song:"You're So Creepy",url:"https://uplusion23.github.io/cdn/music/ghost_town/youre_so_creepy.mp3"},{artist:"Klaypex",song:"Gamefire",url:"https://uplusion23.github.io/cdn/music/klaypex/gamefire.mp3"},{artist:"The Glitch Mob",song:"Seven Nation Army",url:"https://uplusion23.github.io/cdn/music/the_glitch_mob/seven_nation_army.mp3"}],init:function(){window.AudioContext=window.AudioContext||window.webkitAudioContext,this.context=new AudioContext,this.context.suspend&&this.context.suspend(),this.firstLaunch=!0;try{this.javascriptNode=this.context.createScriptProcessor(2048,1,1),this.javascriptNode.connect(this.context.destination),this.analyser=this.context.createAnalyser(),this.analyser.connect(this.javascriptNode),this.analyser.smoothingTimeConstant=.6,this.analyser.fftSize=2048,this.source=this.context.createBufferSource(),this.destination=this.context.destination,this.loadTrack(0),this.gainNode=this.context.createGain(),this.source.connect(this.gainNode),this.gainNode.connect(this.analyser),this.gainNode.connect(this.destination),this.initHandlers()}catch(t){e.setLoadingPercent(1)}e.setLoadingPercent(1),s.init()},loadTrack:function(t){var n=this,e=new XMLHttpRequest,i=this.tracks[t];document.querySelector(".song .artist").textContent=i.artist,document.querySelector(".song .name").textContent=i.song,this.currentSongIndex=t,e.open("GET",i.url,!0),e.responseType="arraybuffer",e.onload=function(){n.context.decodeAudioData(e.response,function(t){n.source.buffer=t})},e.send()},nextTrack:function(){++this.currentSongIndex,this.currentSongIndex==this.tracks.length&&(this.currentSongIndex=0),this.loadTrack(this.currentSongIndex)},prevTrack:function(){--this.currentSongIndex,-1==this.currentSongIndex&&(this.currentSongIndex=this.tracks.length-1),this.loadTrack(this.currentSongIndex)},play:function(){this.context.resume&&this.context.resume(),this.firstLaunch&&(this.source.start(),this.firstLaunch=!1)},stop:function(){this.context.currentTime=0,this.context.suspend()},pause:function(){this.context.suspend()},mute:function(){this.gainNode.gain.value=0},unmute:function(){this.gainNode.gain.value=1},initHandlers:function(){var t=this;this.javascriptNode.onaudioprocess=function(){e.frequencyData=new Uint8Array(t.analyser.frequencyBinCount),t.analyser.getByteFrequencyData(e.frequencyData)}}};a.init()},function(t,n){}]);